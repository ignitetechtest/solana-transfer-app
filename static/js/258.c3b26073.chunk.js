"use strict";(self.webpackChunksolana_transfer_app=self.webpackChunksolana_transfer_app||[]).push([[258],{2788:(e,n,t)=>{var r=t(6382).Buffer;var o=t(6916);function i(e){var n=r.alloc(2);return n.writeUInt16BE(e,0),n}var c={data:r.alloc(0),dataLength:0,sequence:0};n.A=function(e,n){return{makeBlocks:function(t){var o=r.concat([i(t.length),t]),c=n-5,a=Math.ceil(o.length/c);o=r.concat([o,r.alloc(a*c-o.length+1).fill(0)]);for(var u=[],s=0;s<a;s++){var l=r.alloc(5);l.writeUInt16BE(e,0),l.writeUInt8(5,2),l.writeUInt16BE(s,3);var d=o.slice(s*c,(s+1)*c);u.push(r.concat([l,d]))}return u},reduceResponse:function(n,t){var i=n||c,a=i.data,u=i.dataLength,s=i.sequence;if(t.readUInt16BE(0)!==e)throw new o.TransportError("Invalid channel","InvalidChannel");if(5!==t.readUInt8(2))throw new o.TransportError("Invalid tag","InvalidTag");if(t.readUInt16BE(3)!==s)throw new o.TransportError("Invalid sequence","InvalidSequence");n||(u=t.readUInt16BE(5)),s++;var l=t.slice(n?5:7);return(a=r.concat([a,l])).length>u&&(a=a.slice(0,u)),{data:a,dataLength:u,sequence:s}},getReducedResult:function(e){if(e&&e.dataLength===e.data.length)return e.data}}}},2258:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var r,o,i=t(5536),c=t(2788),a=t(500),u=t.n(a),s=function(){return s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},s.apply(this,arguments)};!function(e){e.blue="blue",e.nanoS="nanoS",e.nanoSP="nanoSP",e.nanoX="nanoX",e.nanoFTS="nanoFTS"}(o||(o={}));var l=((r={})[o.blue]={id:o.blue,productName:"Ledger\xa0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:function(e){return 4096}},r[o.nanoS]={id:o.nanoS,productName:"Ledger\xa0Nano\xa0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:function(e){var n;return u().lt(null!==(n=u().coerce(e))&&void 0!==n?n:"","2.0.0")?4096:2048}},r[o.nanoSP]={id:o.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1572864,masks:[856686592],getBlockSize:function(e){return 32}},r[o.nanoX]={id:o.nanoX,productName:"Ledger\xa0Nano\xa0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:function(e){return 4096},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},r[o.nanoFTS]={id:o.nanoFTS,productName:"Ledger\xa0Nano\xa0FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2097152,masks:[857735168],getBlockSize:function(e){return 4096},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},r),d=(o.blue,o.nanoS,o.nanoSP,o.nanoX,o.nanoFTS,Object.values(l)),f=11415,p=function(e){var n=d.find((function(n){return n.legacyUsbProductId===e}));if(n)return n;var t=e>>8;return d.find((function(e){return e.productIdMM===t}))},h=[],v={};for(var y in l){var b=l[y],g=b.bluetoothSpec;if(g)for(var w=0;w<g.length;w++){var m=g[w];h.push(m.serviceUuid),v[m.serviceUuid]=v[m.serviceUuid.replace(/-/g,"")]=s({deviceModel:b},m)}}let S=0;const I=[],k=(e,n,t)=>{const r={type:e,id:String(++S),date:new Date};n&&(r.message=n),t&&(r.data=t),P(r)};const U=e=>(I.push(e),()=>{const n=I.indexOf(e);-1!==n&&(I[n]=I[I.length-1],I.pop())});function P(e){for(let t=0;t<I.length;t++)try{I[t](e)}catch(n){console.error(n)}}"undefined"!==typeof window&&(window.__ledgerLogsListen=U);var _=t(6916),E=t(6382).Buffer,M=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),O=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function c(e){try{u(r.next(e))}catch(n){i(n)}}function a(e){try{u(r.throw(e))}catch(n){i(n)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}u((r=r.apply(e,n||[])).next())}))},B=function(e,n){var t,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=n.call(e,c)}catch(a){i=[6,a],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},L=function(e,n){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,i=t.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return c},T=[{vendorId:f}],x=function(){return Promise.resolve(!(!window.navigator||!window.navigator.hid))},C=function(){var e=navigator.hid;if(!e)throw new _.TransportError("navigator.hid is not supported","HIDNotSupported");return e};function z(){return O(this,void 0,void 0,(function(){var e;return B(this,(function(n){switch(n.label){case 0:return[4,C().requestDevice({filters:T})];case 1:return e=n.sent(),Array.isArray(e)?[2,e]:[2,[e]]}}))}))}function D(){return O(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,C().getDevices()];case 1:return[2,e.sent().filter((function(e){return e.vendorId===f}))]}}))}))}var N=function(e){function n(n){var t=e.call(this)||this;return t.channel=Math.floor(65535*Math.random()),t.packetSize=64,t.inputs=[],t.read=function(){return t.inputs.length?Promise.resolve(t.inputs.shift()):new Promise((function(e){t.inputCallback=e}))},t.onInputReport=function(e){var n=E.from(e.data.buffer);t.inputCallback?(t.inputCallback(n),t.inputCallback=null):t.inputs.push(n)},t._disconnectEmitted=!1,t._emitDisconnect=function(e){t._disconnectEmitted||(t._disconnectEmitted=!0,t.emit("disconnect",e))},t.exchange=function(e){return O(t,void 0,void 0,(function(){var n=this;return B(this,(function(t){switch(t.label){case 0:return[4,this.exchangeAtomicImpl((function(){return O(n,void 0,void 0,(function(){var n,t,r,o,i,a,u,s,l;return B(this,(function(d){switch(d.label){case 0:t=(n=this).channel,r=n.packetSize,k("apdu","=> "+e.toString("hex")),o=(0,c.A)(t,r),i=o.makeBlocks(e),a=0,d.label=1;case 1:return a<i.length?[4,this.device.sendReport(0,i[a])]:[3,4];case 2:d.sent(),d.label=3;case 3:return a++,[3,1];case 4:return(u=o.getReducedResult(s))?[3,6]:[4,this.read()];case 5:return l=d.sent(),s=o.reduceResponse(s,l),[3,4];case 6:return k("apdu","<= "+u.toString("hex")),[2,u]}}))}))})).catch((function(e){if(e&&e.message&&e.message.includes("write"))throw n._emitDisconnect(e),new _.DisconnectedDeviceDuringOperation(e.message);throw e}))];case 1:return[2,t.sent()]}}))}))},t.device=n,t.deviceModel="number"===typeof n.productId?p(n.productId):void 0,n.addEventListener("inputreport",t.onInputReport),t}return M(n,e),n.request=function(){return O(this,void 0,void 0,(function(){var e,t;return B(this,(function(r){switch(r.label){case 0:return[4,z()];case 1:return e=L.apply(void 0,[r.sent(),1]),t=e[0],[2,n.open(t)]}}))}))},n.openConnected=function(){return O(this,void 0,void 0,(function(){var e;return B(this,(function(t){switch(t.label){case 0:return[4,D()];case 1:return 0===(e=t.sent()).length?[2,null]:[2,n.open(e[0])]}}))}))},n.open=function(e){return O(this,void 0,void 0,(function(){var t,r;return B(this,(function(o){switch(o.label){case 0:return[4,e.open()];case 1:return o.sent(),t=new n(e),r=function(n){e===n.device&&(C().removeEventListener("disconnect",r),t._emitDisconnect(new _.DisconnectedDevice))},C().addEventListener("disconnect",r),[2,t]}}))}))},n.prototype.close=function(){return O(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.exchangeBusyPromise];case 1:return e.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return e.sent(),[2]}}))}))},n.prototype.setScrambleKey=function(){},n.isSupported=x,n.list=D,n.listen=function(e){var n=!1;return function(){return O(this,void 0,void 0,(function(){var e;return B(this,(function(n){switch(n.label){case 0:return[4,D()];case 1:return(e=n.sent()).length>0?[2,e[0]]:[4,z()];case 2:return[2,n.sent()[0]]}}))}))}().then((function(t){if(t){if(!n){var r="number"===typeof t.productId?p(t.productId):void 0;e.next({type:"add",descriptor:t,deviceModel:r}),e.complete()}}else e.error(new _.TransportOpenUserCancelled("Access denied to use Ledger device"))}),(function(n){e.error(new _.TransportOpenUserCancelled(n.message))})),{unsubscribe:function(){n=!0}}},n}(i.Ay);const R=N}}]);
//# sourceMappingURL=258.c3b26073.chunk.js.map